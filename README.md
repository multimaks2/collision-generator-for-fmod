**Важное примечание**: код проекта на текущем этапе не строго структурирован и может содержать хаотичность/несогласованность.

### Назначение
Инструмент для чтения и визуализации 3D‑геометрии из Grand Theft Auto: San Andreas. Загружает сцену из `data/gta.dat`, парсит `IPL/IMG`, извлекает `DFF`/коллизии и отображает их в OpenGL 3.3 Core.

### Возможности
- **Загрузка сцены**: чтение `gta.dat`, сбор данных из `IPL` и `IMG`.
- **DFF‑модели**: парсинг из `IMG` или `unpack/` (если IMG недоступен; требуется ручное извлечение), загрузка в GPU (VAO/VBO/EBO).
- **Фильтрация по радиусу**: рендер только видимых объектов (радиус настраивается; при дампе не учитывается).
- **Fallback**: кубы для отсутствующих моделей; попытка автоисправления из `unpack/`.
- **Сцена‑навигатор**: базовая сетка 3000×3000 игровых метров, скайбокс, оси координат.
- **UI**: ImGui‑оверлей для статистики и настроек.

### Технологии
- OpenGL 3.3 Core, GLFW (окно/ввод), GLEW (загрузчик), ImGui (UI), GLM (математика).
- Система координат: X — влево/вправо, Y — вперёд/назад, Z — вверх/вниз.

### Требования к данным
- `data/gta.dat` и соответствующие `*.img` в `models/` (поддерживается автопоиск).
- Опционально: `unpack/` с `*.dff` для fallback.

### Предварительные требования (Windows)
- Visual Studio 2022 (C++17 или новее)
  - Workload: Desktop development with C++
  - MSVC toolset: MSVC v143
  - Windows SDK: Windows 10/11 SDK (10.0.19041+)

### Сборка и запуск (Windows)
- Сначала запустить `create-projects.bat` в корне проекта (генерация `FMOD_GEOMETRY.sln`).
- Открыть `FMOD_GEOMETRY.sln` (Visual Studio, x64).
- Собрать `Release`.
- Запустить `Bin/x86_64/Release/Core.exe`.
 - Итог: исполняемый файл `Core.exe`; объеденяется с необходимыми DLL (`opengl32.dll`), при этом GLEW линкуется статически (`glew32s`).

### Управление
- WASD — движение; Space/Ctrl — вверх/вниз.
- Мышь — обзор; колесо — FOV; Shift — быстрее; Alt — медленнее.
- R — центр камеры; Esc — выход.

### Дамп геометрии
- Экспорт в `geometry.moonstudio` из меню. Формат: сигнатура, список моделей, позиция/кватернион, треугольники (позиции вершин).

### Ограничения
- Текстуры пока не загружаются.
- Некоторые проблемные `DFF` отображаются как fallback‑кубы.
- Импорт коллизий (`.col`) не реализован полностью.

### Используемые внешние модули (`vendor/`)
- `vendor/glew-2.2.0` — GLEW (статическая линковка `glew32s`)
- `vendor/glfw-master` — GLFW (собирается как `glfw-api`)
- `vendor/imgui-master` — ImGui (ядро + backends: `imgui_impl_glfw`, `imgui_impl_opengl3`)
- `vendor/glm-master` — GLM (header‑only)


### Репозитории
- **GLEW**: [github.com/nigels-com/glew](https://github.com/nigels-com/glew)
- **GLFW**: [github.com/glfw/glfw](https://github.com/glfw/glfw)
- **Dear ImGui**: [github.com/ocornut/imgui](https://github.com/ocornut/imgui)
- **GLM**: [github.com/g-truc/glm](https://github.com/g-truc/glm)
- **Premake (premake5, использована сборка из mtasa-blue)**: [github.com/multitheftauto/mtasa-blue](https://github.com/multitheftauto/mtasa-blue)

<details>
  <summary><strong>Структура файла geometry.moonstudio</strong></summary>

# Структура файла geometry.moonstudio

Файл `geometry.moonstudio` содержит 3D геометрию сцены в **полностью текстовом формате** с фиксированной точностью и компактной структурой.

## Заголовок файла
- **Сигнатура**: `"gemometry_ms"` (12 байт)
- **Количество моделей**: `uint32_t` в текстовом формате + перенос строки

## Структура модели
Каждая модель имеет следующую структуру:

### 1. Метаданные модели
- **Название модели**: строка переменной длины + перенос строки
- **Позиция и поворот**: 7 float значений с точностью 6 знаков после запятой, разделенных запятыми + перенос строки:
  - `x` - координата X
  - `y` - координата Y  
  - `z` - координата Z
  - `rx` - компонент X кватерниона
  - `ry` - компонент Y кватерниона
  - `rz` - компонент Z кватерниона
  - `rw` - компонент W кватерниона

### 2. Вершины
- **Количество вершин**: `uint32_t` в текстовом формате + перенос строки
- **Координаты вершин**: для каждой вершины 3 float значения с точностью 6 знаков после запятой, разделенных запятыми + перенос строки:
  - `x` - координата X
  - `y` - координата Y
  - `z` - координата Z

### 3. Полигоны
- **Количество полигонов**: `uint32_t` в текстовом формате + перенос строки
- **Координаты полигонов**: для каждого полигона 9 float значений с точностью 6 знаков после запятой, разделенных запятыми + перенос строки:
  - `v1.x`, `v1.y`, `v1.z` - координаты первой вершины
  - `v2.x`, `v2.y`, `v2.z` - координаты второй вершины
  - `v3.x`, `v3.y`, `v3.z` - координаты третьей вершины

## Пример структуры
```
gemometry_ms
1
test
25.914000,13.337000,8.380000,0.000000,0.000000,0.000000,1.000000
2
25.914000,13.337000,8.380000
40.914000,13.337000,8.416000
1
25.914000,13.337000,8.380000,40.914000,13.337000,8.416000,40.914000,28.337000,8.499000
```

## C++ структуры для чтения

```cpp
struct ModelData {
    std::string name;
    float x, y, z;           // позиция
    float rx, ry, rz, rw;    // кватернион поворота
    uint32_t vertexCount;
    std::vector<FMOD_VECTOR> vertices;
    uint32_t polygonCount;
    std::vector<PolygonData> polygons;
};

struct PolygonData {
    FMOD_VECTOR v1, v2, v3;  // координаты вершин
};
```

## Примечания
- **Формат**: Полностью текстовый (не бинарный)
- **Точность**: Все float значения записываются с точностью 6 знаков после запятой
- **Разделители**: Запятые между координатами, переносы строк между блоками
- **Маркеры**: Убраны все маркеры `\`, `{`, `}`, `[`, `]` для экономии места
- **Координаты**: Вершин и полигонов являются локальными (относительно центра модели)
- **Позиция модели**: Устанавливается отдельно через FMOD API
- **Преимущества**: Точность координат без потери данных, компактность, читаемость

</details>



